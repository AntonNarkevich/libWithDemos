/*! 5thfinger.responsive - v1.3 - 2013-09-27 12:28 */RD.controls.menuCollapsible=function(a){function b(){var b=a.visibleFor||jQ.isFunction(a.manageVisibility),c=a.originalElement||jQ.isFunction(a.parser),d=a.originalElement||jQ.isFunction(a.managePlace);return b&&c&&d}function c(){function b(c,d){var e=d!=h?d:null;if(d=jQ("<ul>").appendTo(d),e){var f=jQ(e).clone();f.children("ul").remove(),f.addClass(i.getFullCssClass("title")),f.find("a").append('<i class="rd-icon '+a.titleIconClass+'"></i>'),f.appendTo(d)}jQ.each(c.items,function(c,e){if(e.text.trim()){var f=jQ("<li>").appendTo(d),g=e.href?e.href:"#",h=e.text?e.text:"",j=jQ('<a href="'+g+'">'+h+"</a>").appendTo(f);e.items&&e.items.length>0?(b(e,f),j.append('<i class="rd-icon '+a.menuItemIconClass+'"></i>')):(j.append('<i class="rd-icon '+a.lastLevelItemIconClass+'"></i>'),f.addClass(i.getFullCssClass("last-level")))}})}function c(){Math.abs(h.width()-k)>=1&&(h.find("ul").width(h.width()),h.children("ul").animate({left:-h.width()*l+"px"},0),k=h.width())}function d(b){if(!m){m=!0;var c=b.closest("ul");h.height()<c.height()&&h.height(c.height()),h.children("ul").animate({left:-h.width()*(l-1)+"px"},a.animationDuration,function(){h.height()>c.height()&&h.height(c.height()),b.removeClass("active"),l--,m=!1})}}function e(b){m||(m=!0,b.addClass("active"),h.height()<b.children("ul").height()&&h.height(b.children("ul").height()),h.children("ul").animate({left:-h.width()*(l+1)+"px"},a.animationDuration,function(){h.height()>b.children("ul").height()&&h.height(b.children("ul").height()),l++,m=!1}))}var f=a.parser(),h=jQ("<div>").addClass(i.getFullCssClass("menu-items")).appendTo(g),j=jQ('<a href="#">'+a.menuButtonText+"</a>").addClass(i.getFullCssClass("btn")).prependTo(g),k=h.width(),l=0,m=!1;b({items:f},h),h.height(h.children("ul").height()),h.hide(),h.children("ul").hide(),j.on("click",function(b){m||(h.toggle(),h.children("ul").toggle(),jQ(this).toggleClass("expanded")),b.preventDefault(),jQ.isFunction(a.onMenuButtonClick)&&a.onMenuButtonClick(b)}),h.on("click","a",function(a){var b=jQ(this),c=b.closest("li");c.hasClass(i.getFullCssClass("title"))?(c=b.closest("li.active"),d(c)):c.children("ul").length&&e(c),c.children("ul").length&&a.preventDefault()}),RD.eventManager.on("resize",c)}function d(){function b(a,d){jQ(a.children("li")).each(function(f,g){var h=jQ(g),i=h.children("a"),j={href:i.attr("href"),text:i.text(),items:[]};a==e?c.push(j):d.items.push(j),h.children("ul")&&b(h.children("ul").first(),j)})}var c=[],d=jQ(a.originalElement),e=d.is("ul")?d:d.children("ul").first();return b(e,c),c}function e(){g.insertAfter(a.originalElement)}function f(){i.manageVisibility(g,jQ(a.originalElement),a.visibleFor)}var g,h,i=RD.controls.baseControl({baseCssClass:"menu-collapsible"}),j={originalElement:null,cssClass:"",visibleFor:null,parser:d,manageVisibility:f,managePlace:e,menuButtonText:"Shop",animationDuration:500,titleIconClass:"icon-circle-arrow-left",menuItemIconClass:"icon-plus",lastLevelItemIconClass:"icon-caret-right",onCreationStart:null,onCreationComplete:null,onMenuButtonClick:null};return i.validate(b(),function(){a=jQ.extend(j,a),g=jQ("<div>").addClass(i.getFullCssClass()).addClass(a.cssClass),jQ.isFunction(a.onCreationStart)&&a.onCreationStart(g),a.managePlace(g),c(),a.manageVisibility(g),jQ.isFunction(a.onCreationComplete)&&a.onCreationComplete(g),h={$el:g}}),h};