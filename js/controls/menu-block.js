/*! 5thfinger.responsive - v1.3 - 2013-09-27 12:28 */RD.controls.menuBlock=function(a){function b(){var b=a.visibleFor||jQ.isFunction(a.manageVisibility),c=a.originalElement||jQ.isFunction(a.parser),d=a.originalElement||jQ.isFunction(a.managePlace);return b&&c&&d}function c(){function b(b,c){var d=b.children("a").children("i");b.children("ul").slideUp(a.animationDuration,function(){b.removeClass("expanded"),d.addClass(a.menuItemIconClass).removeClass(a.expendedMenuItemIconClass),jQ.isFunction(c)&&c()})}function c(b,c){var d=b.children("a").children("i");b.children("ul").slideDown(a.animationDuration,function(){jQ.isFunction(c)&&c()}),b.addClass("expanded"),d.removeClass(a.menuItemIconClass).addClass(a.expendedMenuItemIconClass)}function d(){function b(c,d){jQ(d.items).each(function(d,e){var f=jQ("<li>").appendTo(c),g=e.href?e.href:"#",h=e.text?e.text:"",i=jQ('<a href="'+g+'">'+h+"</a>").appendTo(f);if(e.items.length){f.addClass("collapsible"),i.append("<i class='rd-icon "+a.menuItemIconClass+"'></i>");var j=jQ('<ul style="display: none;">').appendTo(f);b(j,e)}else i.append("<i class='rd-icon "+a.lastLevelItemIconClass+"'></i>")})}b(g,{items:e})}var e=a.parser(),f=!0;d(),g.on("click","li.collapsible > a",function(a){function d(){k--,k||(f=!0)}if(f){f=!1;var e=jQ(this),g=e.closest("li"),h=g.siblings("li.collapsible"),i=e.next("ul"),j=i.find("li.collapsible"),k=h.add(j).add(g).children("ul").length;b(h,d),b(j,d),g.hasClass("expanded")?b(g,d):c(g,d)}a.preventDefault()})}function d(){function b(a,d){jQ(a.children("li")).each(function(f,g){var h=jQ(g).children("a"),i={href:h.attr("href"),text:h.text(),items:[]};a==e?c.push(i):d.items.push(i),jQ(g).children("ul")&&b(jQ(g).children("ul").first(),i)})}var c=[],d=jQ(a.originalElement),e=d.is("ul")?d:d.children("ul").first();return b(e,c),c}function e(){g.insertAfter(a.originalElement)}function f(){i.manageVisibility(g,jQ(a.originalElement),a.visibleFor)}var g,h,i=RD.controls.baseControl({baseCssClass:"menu-block"}),j={originalElement:null,cssClass:"",visibleFor:null,parser:d,manageVisibility:f,managePlace:e,animationDuration:500,menuItemIconClass:"icon-chevron-down",expendedMenuItemIconClass:"icon-chevron-up",lastLevelItemIconClass:"icon-chevron-right",onCreationStart:null,onCreationComplete:null};return i.validate(b(),function(){a=jQ.extend(j,a),g=jQ("<div>").addClass(i.getFullCssClass()).addClass(a.cssClass),jQ.isFunction(a.onCreationStart)&&a.onCreationStart(g),a.managePlace(g),c(),a.manageVisibility(g),jQ.isFunction(a.onCreationComplete)&&a.onCreationComplete(g),h={$el:g}}),h};